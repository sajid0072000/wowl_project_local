

<main role="main" class="pb-3">

  <div class="row">
    <div class="col-md-12">
      <div class="top_scne unit-list-div">
        <div class="top_scne_in">
          <h1>Unit</h1>
          <button class="btn btn-edtng" (click)="gotoAdd()">Create New</button>
        </div>
        <div class="top_scne_rt">
          <div class="btn-group btn-group-sm ms-auto unit-list-filt btn-download-group">
            <div>
              <label>Course</label>
              <div class="search-bar">
                <i class="fa fa-search"></i>
                <input type="text" [(ngModel)]="coursename" (keyup)="searchCourseByName()" [matAutocomplete]="auto"
              class="form-control search-bar-input" placeholder="Search by course name" />
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="getCourseIdByName()">
              <mat-option *ngIf="spinner">
                <mat-spinner style="width:50px;"></mat-spinner>
              </mat-option>
              <mat-option *ngFor="let item of courseArr" [value]="item.coursename">
                {{ item.coursename }}
              </mat-option>
            </mat-autocomplete>
              </div>
            </div>
            <div class="mx-2">
              <label>Lession</label>
              <div class="search-bar">
                <i class="fa fa-search"></i>
                <input type="text" [(ngModel)]="title" (keyup)="searchLessionByName()" [matAutocomplete]="lession"
              class="form-control search-bar-input" placeholder="Search by lession name" />
            <mat-autocomplete #lession="matAutocomplete" (optionSelected)="getLessionIdByName()">
              <mat-option *ngIf="spinnerLession">
                <mat-spinner style="width:50px;"></mat-spinner>
              </mat-option>
              <mat-option *ngFor="let item of lessionArr" [value]="item.title">
                {{ item.title }}
              </mat-option>
            </mat-autocomplete>
              </div>
            </div>
            <div>
              <label>Unit</label>
              <div class="search-bar">
                <i class="fa fa-search"></i>
                <input type="text" [(ngModel)]="searchText" class="form-control search-bar-input"
                  placeholder="Search by unit name" (keyup)="search()" (keyup.enter)="onEnter()">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="main-content">
    <div class="main-content-inner">

      <div class="row">
        <div class="col-md-12">
          <div>
            <div id="datatables-reponsive_wrapper" class="dataTables_wrapper dt-bootstrap5 no-footer">
              <div class="table-responsive">
                <table id="datatables-column-search-select-inputs" class="table table-no-striped dataTable"
                  style="width: 100%" aria-describedby="datatables-column-search-select-inputs_info">
                  <thead class="thead-dark">
                    <tr role="row">
                      <th class="sorting align-middle">Sl No.</th>
                      <th class="sorting align-middle">Course Name</th>
                      <th class="sorting align-middle">Lesson Name</th>
                      <th class="sorting align-middle">Unit Name</th>
                      <!-- <th class="sorting align-middle">Description</th> -->
                      <!-- <th class="sorting align-middle">Video Url</th> -->
                      <th class="sorting align-middle">Video Duration</th>
                      <th class="sorting align-middle">Transcoding Status</th>
                      <!-- <th class="sorting align-middle">Created At</th> -->
                      <th class="sorting align-middle">&nbsp;</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngIf="unitList.length == 0">
                      <td class="text-center" colspan="20">
                        <h4>No Data Found!</h4>
                      </td>
                    </tr>
                    <tr role="row" class="odd" *ngFor="let item of unitList; let i = index">
                      <td class="align-middle">{{ i + 1 }}.</td>
                      <td class="align-middle">{{ item.coursename }}</td>
                      <td class="align-middle">{{ item.lessiontitle }}</td>
                      <td class="align-middle">{{ item.unittitle }}</td>
                      <!-- <td class="align-middle">
                        <div class="des">{{item.description}}</div>
                      </td> -->
<!--                       
                      <td class="align-middle">
                        <a [href]="FILE_ROOT + item.videourl" target="_blank">
                          <i class="fa fa-video-camera docIcon" aria-hidden="true"></i>
                        </a>
                      </td> -->
                      <td class="align-middle">{{ item.minute }}</td>
                      <td  class="align-middle" *ngIf="item.videourl !== '' && item.videourl !== null &&  item.trncstatus === 0" style="color: #e39013;">Transcoding in progress...</td>
                      <td  class="align-middle" *ngIf="item.videourl !== '' && item.videourl !== null && item.trncstatus === 1" style="color: #17a607;">Transcoding in Completed</td>
                      <td  class="align-middle" *ngIf="item.videourl === '' || item.videourl === null" style="color: red;">Video not upload yet</td>
                      <!-- <td class="align-middle">{{ item.createdat }}</td> -->
                      <td class="align-middle">
                        <!-- <i class="fa fa-edit editbtn" (click)="gotoEdit(item.unitid)"
                          style="font-size: 24px; cursor: pointer"></i>
                        &nbsp;&nbsp;
                        <i class="deletebtn fa fa-trash" style="font-size: 24px; cursor: pointer"
                          (click)="onClickDelete(item.unitid)"></i> -->
                        <button class="btn btn-arow" (click)="gotoEdit(item.unitid)"><i
                            class="fa fa-chevron-right"></i></button>

                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="d-xl-flex align-items-center mt-3 pegin_sec" *ngIf="unitList.length > 0">
                <div class="col-auto d-block">
                  <div class="text-center">
                    <div class="dataTables_length"><label>Courses per page
                        <select name="datatables-reponsive_length" aria-controls="datatables-reponsive"
                          class="form-select form-select-sm" (change)="changePagelimit($event)"
                          [(ngModel)]="selectedVal">
                          <option *ngFor="let item of pageList" [value]=item.value>{{item.name}}
                          </option>
                        </select> {{offset + 1}} - {{offset + limit}}</label>
                      <label class="mx-2">
                        <button class="btn btn-dark text-white" [disabled]="previousBtnDesable"
                          (click)="previousPage()"><img src="assets/img/chevron-left.svg" alt="chevron-left"></button>
                        &nbsp;
                        <button class="btn btn-dark text-white" [disabled]="nextBtnDesable" (click)="nextPage()"><img
                            src="assets/img/chevron-right.svg" alt="chevron-right"></button>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>


  </div>

</main>